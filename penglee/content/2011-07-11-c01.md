Title:  C-结构体声明
Date:2011-07-11
Author:李鹏
Slug: C
Tags:C
category:编程语言-C

**结构体声明**

例如：
    struct Student
    {
         char name[20];
         char sex;
         int age;
         char addr[40];
     }
     /*定义一个Student 类型的student变量*/
     struct Student student;

定义结构体的时候每次都要写struct显得比较繁琐，可以用typedef来方便声明。这样就可以想int、char一样定义结构体类型了。比如：

    typedef struct _TEST_T {
        int i;
        char c[10];
    }TEST_T;
    
**初始化**

1.初始化的就是定义一个结构体变量，并且给它赋值比如：

    TEST_T gst  = {1, “12345”}; /*可以初始化，设置i为1，c为一个字符串.*/
    TEST_T gst  = {1}; /*初始化个数少于实际个数时，只初始化前面的成员。*/
    TEST_T gst  = {.c=“12345”}; /*有选择的初始化成员。*/


2、复合字面量。

    gst = (TEST_T){122, "1256"}; /*这是一个赋值语句，也可以作为初始化。可以出现在程序的任何地方。*/

当然也可以使用复合字面量来初始化：

    gst = (TEST_T){.i=122, .c="123"};
    
3、结构体数组

可以用多个大括号括起来：

    TEST_T gst[10] = \{\{\},\{\},\{\},\{\}\} 

也可以初始化其中的一个元素：
    
    TEST_T gst[10] = {[2]={}, [3]={}}

也可以使用复合字面量：

    TEST_T gst[10] = {[2].i=0, [3].i={}}


**为什么要初始化**

1、对局部变量初始化可以防止随机值产生的危害。

2、对全局变量初始化可以告诉编译器，这是一个定义，而不是一个声明。（如果两个c中有相同的全局变量定义，且没有初始化，编译器会认为第二个是声明而不是定义。）

声明和定义的区别在于是否分配内存进行存储。

